{% extends "layout.html" %}

{% block main %}

    <div id="form-cont" class="col">
        <button hidden onclick="fileSelect()">Choose File</button>
        <form action="/test" enctype="multipart/form-data" method="post">
            <input class="legacy" id="file-input" type="file" name="file" onchange="handleFiles(this.files)"><br>
            <input class="legacy" id="number-input" type="number" name="length" placeholder="Number of subjects"><br>
            <input id="submit" type="submit">
            <input id="json-text" type="text" name="json-text" hidden>
        </form>
    </div>
    <script>
        function fileSelect() {
            $("#file-input").trigger("click");
        }
        function handleFiles(files) {
            var file = files[0]
            console.log(file.name);
            var reader = new FileReader()
            reader.onload = function(event) {
                var contents = event.target.result;
                console.log("File contents: " + contents);
                $("#json-text").val(contents);
            };
            reader.readAsText(file)
        }
        $(document).ready(function() {
            $(".legacy").hide(0);
            $("form > br").remove();
            //$("#file-input").attr("name", "")
            $("#form-cont > button").removeAttr("hidden")
        });
    </script>

{% endblock %}
